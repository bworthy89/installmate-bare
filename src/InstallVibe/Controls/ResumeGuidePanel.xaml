<UserControl
    x:Class="InstallVibe.Controls.ResumeGuidePanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Visibility="{x:Bind HasLastGuide, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">

    <Border Background="{ThemeResource AccentFillColorDefaultBrush}"
            BorderBrush="{ThemeResource AccentControlElevationBorderBrush}"
            BorderThickness="1"
            CornerRadius="8"
            Padding="20"
            Margin="0,0,0,24">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Icon -->
            <Border Grid.Column="0"
                    Width="48"
                    Height="48"
                    Background="{ThemeResource AccentFillColorSecondaryBrush}"
                    CornerRadius="24"
                    Margin="0,0,16,0">
                <FontIcon Glyph="&#xE7C8;"
                          FontSize="24"
                          Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"/>
            </Border>

            <!-- Content -->
            <StackPanel Grid.Column="1" Spacing="4" VerticalAlignment="Center">
                <TextBlock Text="Continue Where You Left Off"
                           Style="{StaticResource SubtitleTextBlockStyle}"
                           Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"/>

                <TextBlock Foreground="{ThemeResource TextOnAccentFillColorSecondaryBrush}"
                           TextWrapping="Wrap">
                    <Run Text="{x:Bind LastGuideTitle, Mode=OneWay}"/>
                    <Run Text="â€¢"/>
                    <Run Text="Step"/>
                    <Run Text="{x:Bind LastGuideStep, Mode=OneWay}"/>
                    <Run Text="of"/>
                    <Run Text="{x:Bind LastGuideTotalSteps, Mode=OneWay}"/>
                </TextBlock>

                <!-- Progress Bar -->
                <ProgressBar Value="{x:Bind LastGuideProgress, Mode=OneWay}"
                             Maximum="100"
                             Margin="0,8,0,0"
                             Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                             Background="{ThemeResource AccentFillColorTertiaryBrush}"/>
            </StackPanel>

            <!-- Action Button -->
            <Button Grid.Column="2"
                    Command="{x:Bind ResumeCommand}"
                    Style="{StaticResource AccentButtonStyle}"
                    Padding="20,10"
                    VerticalAlignment="Center">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <SymbolIcon Symbol="Play"/>
                    <TextBlock Text="Resume" FontWeight="SemiBold"/>
                </StackPanel>
            </Button>
        </Grid>
    </Border>
</UserControl>
