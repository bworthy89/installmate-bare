<ContentDialog
    x:Class="InstallVibe.Dialogs.UpdateRestartDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Restart Required"
    PrimaryButtonText="Restart Now"
    SecondaryButtonText="Restart Later"
    DefaultButton="Primary"
    PrimaryButtonClick="PrimaryButton_Click"
    SecondaryButtonClick="SecondaryButton_Click">

    <StackPanel Spacing="16" MinWidth="400">
        <!-- Icon -->
        <FontIcon Glyph="&#xE777;"
                  FontSize="48"
                  Foreground="{ThemeResource SystemAccentColor}"
                  HorizontalAlignment="Center"/>

        <!-- Message -->
        <TextBlock Text="The update has been downloaded and is ready to install."
                   TextWrapping="Wrap"
                   HorizontalAlignment="Center"
                   FontSize="16"/>

        <TextBlock Text="InstallVibe needs to restart to complete the update installation."
                   TextWrapping="Wrap"
                   HorizontalAlignment="Center"
                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>

        <!-- Version Information -->
        <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="16"
                Margin="0,8,0,0">
            <StackPanel Spacing="8">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0"
                               Text="Current Version:"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                               Margin="0,0,12,0"/>
                    <TextBlock Grid.Row="0" Grid.Column="1"
                               x:Name="CurrentVersionText"
                               FontWeight="SemiBold"/>

                    <TextBlock Grid.Row="1" Grid.Column="0"
                               Text="New Version:"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                               Margin="0,8,12,0"/>
                    <TextBlock Grid.Row="1" Grid.Column="1"
                               x:Name="NewVersionText"
                               FontWeight="SemiBold"
                               Foreground="{ThemeResource SystemAccentColor}"
                               Margin="0,8,0,0"/>
                </Grid>
            </StackPanel>
        </Border>

        <!-- Warning for unsaved work -->
        <InfoBar Severity="Warning"
                 IsOpen="True"
                 IsClosable="False"
                 Title="Save Your Work"
                 Message="Please save any unsaved work before restarting."
                 Margin="0,8,0,0"/>
    </StackPanel>
</ContentDialog>
